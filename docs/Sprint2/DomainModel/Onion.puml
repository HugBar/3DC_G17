@startuml "Hospital Management System - Onion Architecture"

' Define custom styles
!define CORE_COLOR #FFE6E6
!define APP_COLOR #E6FFE6
!define INFRA_COLOR #E6E6FF
!define UI_COLOR #FFE6FF

package "Domain Core" as core #CORE_COLOR {
    package "Domain Entities" {
        class Patient
        class Staff
        class OperationType
        class OperationRequest
        class ApplicationUser
    }
    
    package "Domain Interfaces" {
        interface IPatientRepository
        interface IStaffRepository
        interface IOperationRepository
        interface IEmailService
        interface ILoggingService
    }
}

package "Application Layer" as app #APP_COLOR {
    package "Services" {
        class AuthService
        class PatientService
        class StaffService
        class OperationService
        class UserService
    }
    
    package "DTOs" {
        class PatientDto
        class StaffDto
        class OperationDto
        class LoginDto
    }
}

package "Infrastructure Layer" as infra #INFRA_COLOR {
    package "Persistence" {
        class PatientRepository
        class StaffRepository
        class OperationRepository
        class DDDSample1DbContext
    }
    
    package "External Services" {
        class SmtpEmailService
        class LoggingService
        class GoogleAuthService
    }
}

package "Presentation Layer" as ui #UI_COLOR {
    package "API Controllers" {
        class AuthController
        class PatientController
        class StaffController
        class OperationController
    }
    
    package "Frontend" {
        component "React Components"
        component "State Management"
        component "API Services"
    }
}

' Define dependencies
ui ..> app
app ..> core
infra ..> core

' Implement interfaces
PatientRepository ..|> IPatientRepository
StaffRepository ..|> IStaffRepository
OperationRepository ..|> IOperationRepository
SmtpEmailService ..|> IEmailService
LoggingService ..|> ILoggingService

' Service dependencies
AuthService --> IEmailService
PatientService --> IPatientRepository
StaffService --> IStaffRepository
OperationService --> IOperationRepository

' Controller dependencies
AuthController --> AuthService
PatientController --> PatientService
StaffController --> StaffService
OperationController --> OperationService

@enduml